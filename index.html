<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SeroStore</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      color: #333;
      padding: 20px;
    }
    header {
      text-align: center;
      background: #2196f3;
      color: white;
      padding: 20px;
      border-radius: 12px;
    }
    main {
      max-width: 700px;
      margin: auto;
    }
    .auth-box {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      text-align: center;
    }
    .auth-box input {
      display: block;
      width: 100%;
      margin: 10px 0;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    .auth-buttons button {
      margin: 5px;
      padding: 10px 20px;
      border: none;
      background: #2196f3;
      color: white;
      border-radius: 8px;
      cursor: pointer;
    }
    .upload-section,
    .game-list {
      background: white;
      padding: 20px;
      border-radius: 12px;
      margin-top: 30px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    .upload-section input,
    .upload-section textarea,
    .upload-section button {
      display: block;
      width: 100%;
      margin: 10px 0;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    .upload-section button {
      background: #43a047;
      color: white;
      border: none;
      cursor: pointer;
    }
    .game-card {
      background: #fafafa;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 10px;
      border: 1px solid #ddd;
    }
    .download-link {
      display: inline-block;
      margin-top: 10px;
      background: #1e88e5;
      color: white;
      padding: 8px 12px;
      border-radius: 6px;
      text-decoration: none;
    }
  </style>
</head>
<body>
  <header>
    <h1>SeroStore</h1>
    <p>Toko Game Buatan Kamu</p>
  </header>

  <main>
    <section id="authSection">
      <div class="auth-box">
        <h2>Login / Register</h2>
        <input type="text" id="username" placeholder="Username" required />
        <input type="password" id="password" placeholder="Password" required />
        <div class="auth-buttons">
          <button onclick="register()">Register</button>
          <button onclick="login()">Login</button>
        </div>
        <p id="authMsg"></p>
      </div>
    </section>

    <section id="appSection" style="display:none;">
      <div class="upload-section">
        <h2>Upload Game</h2>
        <form id="gameForm">
          <input type="text" id="gameName" placeholder="Nama Game" required />
          <input type="text" id="genre" placeholder="Genre" required />
          <textarea id="description" placeholder="Deskripsi" required></textarea>
          <input type="file" id="gameFile" required />
          <button type="submit">Upload</button>
        </form>
      </div>

      <div class="game-list">
        <h2>Game Tersedia</h2>
        <div id="gamesContainer"></div>
      </div>
    </section>
  </main>

  <script>
    const gameForm = document.getElementById("gameForm");
    const gamesContainer = document.getElementById("gamesContainer");
    let currentUser = null;

    function register() {
      const user = document.getElementById("username").value;
      const pass = document.getElementById("password").value;
      if (localStorage.getItem("user_" + user)) {
        showMessage("Username sudah dipakai!", "red");
      } else {
        localStorage.setItem("user_" + user, pass);
        showMessage("Berhasil register! Sekarang login.", "green");
      }
    }

    function login() {
      const user = document.getElementById("username").value;
      const pass = document.getElementById("password").value;
      const storedPass = localStorage.getItem("user_" + user);
      if (storedPass === pass) {
        currentUser = user;
        document.getElementById("authSection").style.display = "none";
        document.getElementById("appSection").style.display = "block";
        loadGames();
      } else {
        showMessage("Username atau password salah!", "red");
      }
    }

    function showMessage(msg, color) {
      const el = document.getElementById("authMsg");
      el.innerText = msg;
      el.style.color = color;
    }

    gameForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const name = document.getElementById("gameName").value;
      const genre = document.getElementById("genre").value;
      const desc = document.getElementById("description").value;
      const fileInput = document.getElementById("gameFile");
      const file = fileInput.files[0];

      if (file && currentUser) {
        const fileURL = URL.createObjectURL(file);
        const game = {
          uploader: currentUser,
          name,
          genre,
          desc,
          fileName: file.name,
          fileURL,
        };

        let games = JSON.parse(localStorage.getItem("games")) || [];
        games.push(game);
        localStorage.setItem("games", JSON.stringify(games));

        renderGame(game);
        gameForm.reset();
      }
    });

    function loadGames() {
      gamesContainer.innerHTML = "";
      const games = JSON.parse(localStorage.getItem("games")) || [];
      games.forEach(renderGame);
    }

    function renderGame(game) {
      const card = document.createElement("div");
      card.className = "game-card";
      card.innerHTML = `
        <h3>${game.name}</h3>
        <p><strong>Genre:</strong> ${game.genre}</p>
        <p><strong>Deskripsi:</strong> ${game.desc}</p>
        <p><strong>Uploader:</strong> ${game.uploader}</p>
        <a class="download-link" href="${game.fileURL}" download="${game.fileName}">Download</a>
      `;
      gamesContainer.appendChild(card);
    }
  </script>
</body>
</html>
